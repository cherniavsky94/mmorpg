# –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –õ–æ–∫–∞–ª—å–Ω–æ (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ `0.0.0.0:2567`
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ `0.0.0.0:5173`
- ‚úÖ Matchmaking endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ
```bash
# –°–µ—Ä–≤–µ—Ä
curl http://localhost:2567/
# {"status":"ok","message":"Colyseus server running","rooms":["city","battle"]}

curl -X POST http://localhost:2567/matchmake/joinOrCreate/city -H "Content-Type: application/json" -d '{}'
# {"room":{...},"sessionId":"..."}

# –ö–ª–∏–µ–Ω—Ç
curl http://localhost:5173/
# HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å Phaser –∏–≥—Ä–æ–π
```

## ‚ö†Ô∏è Gitpod Public URLs

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è
–ü–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã –≤ Gitpod, –Ω–æ **–º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑–≤–Ω–µ** –∏–∑-–∑–∞ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Dev Container.

**URL-—ã:**
- –°–µ—Ä–≤–µ—Ä: https://2567--019b03d2-4e60-7251-a151-670a306cc63e.eu-central-1-01.gitpod.dev/
- –ö–ª–∏–µ–Ω—Ç: https://5173--019b03d2-4e60-7251-a151-670a306cc63e.eu-central-1-01.gitpod.dev/

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–î–æ–±–∞–≤–ª–µ–Ω `forwardPorts` –≤ `.devcontainer/devcontainer.json`:**
   ```json
   {
     "forwardPorts": [5173, 2567],
     "portsAttributes": {
       "5173": {
         "label": "Vite Client",
         "onAutoForward": "openPreview"
       },
       "2567": {
         "label": "Colyseus Server",
         "onAutoForward": "notify"
       }
     }
   }
   ```

2. **–°–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –Ω–∞ `0.0.0.0:2567`** (IPv4, –Ω–µ IPv6)

3. **–ü–æ—Ä—Ç—ã –≤–∏–¥–Ω—ã –≤ Gitpod:**
   ```bash
   gitpod environment port list
   # PORT  NAME           URL
   # 2567  preview        https://2567--...
   # 5173  Client         https://5173--...
   ```

### –ü–æ—á–µ–º—É –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å

Dev Container –≤ Gitpod —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–∞—á–µ, —á–µ–º –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π Gitpod:
- –ü–æ—Ä—Ç—ã –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Docker
- –ú–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ workspace –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `devcontainer.json`
- Gitpod –ø—Ä–æ–∫—Å–∏ –º–æ–∂–µ—Ç –Ω–µ –≤–∏–¥–µ—Ç—å –ø–æ—Ä—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### –†–µ—à–µ–Ω–∏–µ

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å workspace**
1. –ó–∞–∫—Ä–æ–π—Ç–µ —Ç–µ–∫—É—â–∏–π workspace
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–Ω–æ–≤–æ - Gitpod –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ –∑–∞–ø—É—Å—Ç—è—Ç—Å—è —Å–µ—Ä–≤–∏—Å—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL-—ã

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π Gitpod (–±–µ–∑ Dev Container)**
1. –£–¥–∞–ª–∏—Ç–µ –ø–∞–ø–∫—É `.devcontainer/`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ `.gitpod.yml`
3. Gitpod –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.gitpod.Dockerfile` –Ω–∞–ø—Ä—è–º—É—é

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã –≤—Ä—É—á–Ω—É—é**
```bash
# –í–Ω—É—Ç—Ä–∏ workspace
gitpod environment port list

# –ï—Å–ª–∏ –ø–æ—Ä—Ç—ã –Ω–µ public, —Å–¥–µ–ª–∞—Ç—å –∏—Ö –ø—É–±–ª–∏—á–Ω—ã–º–∏
gitpod environment port open 2567
gitpod environment port open 5173
```

## üìù –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
pnpm dev:server
```

### –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞
```bash
pnpm dev:client
```

### –ó–∞–ø—É—Å–∫ –æ–±–æ–∏—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
```bash
pnpm dev
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
killall -9 node
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
```bash
netstat -tlnp | grep 2567
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: tcp  0.0.0.0:2567  (–Ω–µ tcp6 :::2567)
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã –≤ Gitpod
```bash
gitpod environment port list
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
```bash
tail -f /tmp/server.log
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞
```bash
tail -f /tmp/client.log
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [START.md](./START.md) - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É
- [GITPOD.md](./GITPOD.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Gitpod
- [FIXES.md](./FIXES.md) - –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Gitpod workspace** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `devcontainer.json`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL-—ã** –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
3. **–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π Gitpod –±–µ–∑ Dev Container

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –ø—É–±–ª–∏—á–Ω—ã–µ URL –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–ª–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç –ª–æ–∫–∞–ª—å–Ω–æ
2. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:5173` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ `ws://localhost:2567`

–î–ª—è —ç—Ç–æ–≥–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `client/.env.local` —É–∫–∞–∑–∞–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π URL:
```env
VITE_WS_URL=ws://localhost:2567
```

## ‚úÖ –ß—Ç–æ —Ç–æ—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

- ‚úÖ –°–µ—Ä–≤–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ Matchmaking routes –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ WebSocket —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö–æ–º–Ω–∞—Ç—ã (city, battle) –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- ‚úÖ Prisma –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ Supabase
- ‚úÖ –ö–ª–∏–µ–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ Zustand stores –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ. –ü—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ —Å –¥–æ—Å—Ç—É–ø–æ–º —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–µ URL Gitpod, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ Dev Container.
